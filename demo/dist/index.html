<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>Exacta demo</title> <link rel="icon" type="image/png" href="data:text/html;base64,PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+Cgk8bWV0YSBjaGFyc2V0PSd1dGYtOCc+Cgk8bWV0YSBuYW1lPSd2aWV3cG9ydCcgY29udGVudD0nd2lkdGg9ZGV2aWNlLXdpZHRoLGluaXRpYWwtc2NhbGU9MSc+CgoJPHRpdGxlPkV4YWN0YSBkZW1vPC90aXRsZT4KCgk8bGluayByZWw9J2ljb24nIHR5cGU9J2ltYWdlL3BuZycgaHJlZj0nJz4KCTxsaW5rIHJlbD0nc3R5bGVzaGVldCcgaHJlZj0nL2dsb2JhbC5jc3MnPgoJPGxpbmsgcmVsPSdzdHlsZXNoZWV0JyBocmVmPScvYnVpbGQvYnVuZGxlLmNzcyc+Cgo8L2hlYWQ+Cgo8Ym9keT48L2JvZHk+Cgo8c2NyaXB0IHNyYz0nL2J1aWxkL2J1bmRsZS5qcyc+PC9zY3JpcHQ+Cgo8L2h0bWw+Cg=="> <style>html, body{ position:relative;width:100%;height:100%;}body{ color:#333;margin:0;padding:8px;box-sizing:border-box;font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;}a{ color:rgb(0,100,200);text-decoration:none;}a:hover{ text-decoration:underline;}a:visited{ color:rgb(0,80,160);}label{ display:block;}input, button, select, textarea{ font-family:inherit;font-size:inherit;-webkit-padding:0.4em 0;padding:0.4em;margin:0 0 0.5em 0;box-sizing:border-box;border:1px solid #ccc;border-radius:2px;}input:disabled{ color:#ccc;}button{ color:#333;background-color:#f4f4f4;outline:none;}button:disabled{ color:#999;}button:not(:disabled):active{ background-color:#ddd;}button:focus{ border-color:#666;}</style> <style>main.svelte-6jd2sl.svelte-6jd2sl{display:flex;height:100%;width:41em;margin:auto;flex-direction:column}.head.svelte-6jd2sl.svelte-6jd2sl{display:flex;justify-content:space-between;align-content:stretch;padding:0.5em }.head.svelte-6jd2sl>.left.svelte-6jd2sl{flex-basis:8em}.head.svelte-6jd2sl>.right.svelte-6jd2sl{flex-basis:9em;text-align:right}.head.svelte-6jd2sl .middle.svelte-6jd2sl{text-align:center}main.svelte-6jd2sl>div.svelte-6jd2sl{border:solid 1px grey}a.disabled.svelte-6jd2sl.svelte-6jd2sl{color:black}a.disabled.svelte-6jd2sl.svelte-6jd2sl:hover{text-decoration:none;cursor:default}pre.svelte-6jd2sl.svelte-6jd2sl{flex-grow:1;overflow-y:scroll;white-space:pre-wrap;margin:0;border:solid 1px grey;border-top:none;padding:0.5em}</style> </head> <body></body> <script>var app=function(){"use strict";function noop(){}function run(t){return t()}function blank_object(){return Object.create(null)}function run_all(t){t.forEach(run)}function is_function(t){return"function"==typeof t}function safe_not_equal(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function append(t,e){t.appendChild(e)}function detach(t){t.parentNode.removeChild(t)}function element(t){return document.createElement(t)}function text(t){return document.createTextNode(t)}function space(){return text(" ")}function attr(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function toggle_class(t,e,n){t.classList[n?"add":"remove"](e)}let t;function set_current_component(e){t=e}function afterUpdate(e){(function get_current_component(){if(!t)throw new Error("Function called outside component initialization");return t})().$$.after_update.push(e)}const e=[],n=[],s=[],r=[],a=Promise.resolve();let o=!1;function add_render_callback(t){s.push(t)}let c=!1;const i=new Set;function flush(){if(!c){c=!0;do{for(let t=0;t<e.length;t+=1){const n=e[t];set_current_component(n),update(n.$$)}for(set_current_component(null),e.length=0;n.length;)n.pop()();for(let t=0;t<s.length;t+=1){const e=s[t];i.has(e)||(i.add(e),e())}s.length=0}while(e.length);for(;r.length;)r.pop()();o=!1,c=!1,i.clear()}}function update(t){if(null!==t.fragment){t.update(),run_all(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(add_render_callback)}}const u=new Set;function make_dirty(t,n){-1===t.$$.dirty[0]&&(e.push(t),function schedule_update(){o||(o=!0,a.then(flush))}(),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function init(e,n,s,r,a,o,c=[-1]){const i=t;set_current_component(e);const l=e.$$={fragment:null,ctx:null,props:o,update:noop,not_equal:a,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i?i.$$.context:[]),callbacks:blank_object(),dirty:c,skip_bound:!1};let d=!1;if(l.ctx=s?s(e,n.props||{},((t,n,...s)=>{const r=s.length?s[0]:n;return l.ctx&&a(l.ctx[t],l.ctx[t]=r)&&(!l.skip_bound&&l.bound[t]&&l.bound[t](r),d&&make_dirty(e,t)),n})):[],l.update(),d=!0,run_all(l.before_update),l.fragment=!!r&&r(l.ctx),n.target){if(n.hydrate){const t=function children(t){return Array.from(t.childNodes)}(n.target);l.fragment&&l.fragment.l(t),t.forEach(detach)}else l.fragment&&l.fragment.c();n.intro&&function transition_in(t,e){t&&t.i&&(u.delete(t),t.i(e))}(e.$$.fragment),function mount_component(t,e,n,s){const{fragment:r,on_mount:a,on_destroy:o,after_update:c}=t.$$;r&&r.m(e,n),s||add_render_callback((()=>{const e=a.map(run).filter(is_function);o?o.push(...e):run_all(e),t.$$.on_mount=[]})),c.forEach(add_render_callback)}(e,n.target,n.anchor,n.customElement),flush()}set_current_component(i)}function create_fragment(t){let e,n,s,r,a,o,c,i,u,l,d,p,f;return{c(){e=element("main"),n=element("div"),s=element("div"),r=element("a"),r.textContent="start benchmark",a=space(),o=element("div"),o.textContent="exacta demo",c=space(),i=element("div"),i.innerHTML='<a href="https://github.com/kraiovsky/exacta">github</a>',u=space(),l=element("pre"),d=text(t[1]),attr(r,"href","#run"),attr(r,"class","svelte-6jd2sl"),toggle_class(r,"disabled",t[2]),attr(s,"class","left svelte-6jd2sl"),attr(o,"class","middle svelte-6jd2sl"),attr(i,"class","right svelte-6jd2sl"),attr(n,"class","head svelte-6jd2sl"),attr(l,"class","svelte-6jd2sl"),attr(e,"class","svelte-6jd2sl")},m(m,h){!function insert(t,e,n){t.insertBefore(e,n||null)}(m,e,h),append(e,n),append(n,s),append(s,r),append(n,a),append(n,o),append(n,c),append(n,i),append(e,u),append(e,l),append(l,d),t[4](l),p||(f=function listen(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}(r,"click",t[3]),p=!0)},p(t,[e]){4&e&&toggle_class(r,"disabled",t[2]),2&e&&function set_data(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}(d,t[1])},i:noop,o:noop,d(n){n&&detach(e),t[4](null),p=!1,f()}}}function sleep(t=0){return new Promise(((e,n)=>{setTimeout((t=>e()),t)}))}function getFn(t=1){const e=20*t;return async function cpuburn(){return await sleep(4*t*Math.random()),Array.from({length:e}).map((t=>Math.random())).reduce(((t,e)=>t+e),0)/e}}function instance(t,e,s){let r,a="";const o={log:async t=>{s(1,a+=t+"\n"),await sleep(10)}};afterUpdate((()=>{r.scrollBy({top:1e3})}));let c=!1;return[r,a,c,async function startBenchmark(){c||(s(2,c=!0),s(1,a=""),await sleep(10),await(new class Race{constructor(){this._runs=1e3,this._warmup=100,this._samples=10,this._fns=[],this._params=[],this.console=console}setConsole(t){return this.console=t,this}setRuns(t){return this._runs=t,this}setSamples(t){return this._samples=t,this}setWarmup(t){return this._warmup=t,this}addFn(t){return this._fns.push(t),this}setParams(){return this._params=Array.from(arguments),this}async run(){function get_time(){return new Date}const t={},e=[],n=new Set(this._fns.map((t=>t.name))),s={},r=this._fns.map((t=>{const e=t.name;if(n.has(e)){let t=s[e]||1;for(;t<1e4;t++){const r=e+"_"+t;if(!n.has(r))return s[e]=t+1,r}}return e})),average=t=>t.reduce(((t,e)=>t+e),0)/t.length,standardDeviation=t=>{const e=average(t);return Math.sqrt(average(t.map((t=>{const n=t-e;return n*n}))))},a=new Set,o={};`${this._samples}`.length;const c="123456789abcdefghijklmnopqrstuvwxyz";for(let t=0;t<this._samples;t++){const n=[];for(let s=0;s<this._fns.length;s++){const c=this._fns[s],i=r[s];if(0==t&&(o[i]=[]),e.push(i.length),!a.has(c)){const t=Date.now()+this._warmup;for(this.console.log(`warmup: run ${i} for ${this._warmup} ms`);Date.now()<t;)await c(...this._params);a.add(c)}const u=get_time();for(let t=0;t<this._runs;t++)await c(...this._params);const l=get_time()-u;o[i].push(l),n.push(l)}const s=n.reduce(((t,e)=>t+e),0),i=80,u=1/s*(i-2)*this._fns.length,l=n.map((t=>i-2-(t*u-.5*(i-2)))),d="                                                                                                                        ",p=l.map(((t,e)=>d.slice(0,t)+c[e])).join("\n");await this.console.log(p+"\nslow <-------------------------------- o --------------------------------\x3e fast")}for(let e=0;e<this._fns.length;e++){const n=r[e];t[n]={results:o[n],avg:average(o[n]),dev:standardDeviation(o[n]),min:Math.min(...o[n]),max:Math.max(...o[n]),fnIdx:e}}const i=Math.max(...e)+7,u="Function".padEnd(i+2),l="Minimum Time",d=u.length+l.length;let p=["\n--= Race results =--\n\n",`# of runs: ${this._runs}\n`,`${u}Minimum Time\n`,`${"=".repeat(d)}\n`].join("");Object.entries(t).sort(((t,e)=>t[1].min-e[1].min)).forEach((([t,{avg:e,min:n,max:s,dev:r,results:a,fnIdx:o}],u)=>{p+=[`${c[o]}. ${`${t}`.padEnd(i)}${n} ms (avg ${e}) (max ${s}) (dev ${r.toFixed(1)})\n`,`${"-".repeat(d)}\n`].join("")})),this.console.log(p)}}).setConsole(o).setRuns(50).setSamples(20).setWarmup(500).addFn(getFn(2)).addFn(getFn(3)).run(),s(2,c=!1))},function pre_1_binding(t){n[t?"unshift":"push"]((()=>{r=t,s(0,r)}))}]}return new class App extends class SvelteComponent{$destroy(){!function destroy_component(t,e){const n=t.$$;null!==n.fragment&&(run_all(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=noop}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){this.$$set&&!function is_empty(t){return 0===Object.keys(t).length}(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}{constructor(t){super(),init(this,t,instance,create_fragment,safe_not_equal,{})}}({target:document.body,props:{}})}();</script> </html> 